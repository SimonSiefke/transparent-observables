CSS Variables are another example of this concept.

```css
:root {
  --color: red;
}

button {
  color: var(--color);
}
```

This results in the text color of buttons being red.

```html
<p data-count="0">count is </p>
<style>
  p:after {
    content: attr(data-count);
  }
</style>
<script>
  let i = 0
  setInterval(() => {
    document.querySelector('p').setAttribute('data-count', i++)
  }, 1000)
</script>
```

The interesting part is in the `<style>` tag where the value of the `content` attribute is specified is specified. The JavaScript part changes the `data-count` value of the `p` tag every second. The `content` attribute is not explicitly changed, it updates seemingly automatically. I've looked into the firefox source code to see how this behaviour is implemented. When an attribute is changed, firefox calls an `Invalidate` method. The `Invalidate` method then notifies all `FilterInvalidationListeners` of the change, which causes the value to update eventually. They used the Observer pattern.

Line 1379 ff

```cpp
void FilterNodeColorMatrixSoftware::SetAttribute(uint32_t aIndex, const Matrix5x4 &aMatrix) {
  MOZ_ASSERT(aIndex == ATT_COLOR_MATRIX_MATRIX);
  mMatrix = aMatrix;
  Invalidate();
}
```

Line 891 ff

```cpp
void FilterNodeSoftware::Invalidate() {
  MutexAutoLock lock(mCacheMutex);
  mCachedOutput = nullptr;
  mCachedRect = IntRect();
  for (std::vector<FilterInvalidationListener *>::iterator it =
           mInvalidationListeners.begin();
       it != mInvalidationListeners.end(); it++) {
    (*it)->FilterInvalidated(this);
  }
}
```

[firefox code for setattribute](https://dxr.mozilla.org/mozilla-central/source/gfx/2d/FilterNodeSoftware.cpp)
